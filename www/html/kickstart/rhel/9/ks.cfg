#version=RHEL9
# Use text mode install
text
install
cdrom
lang en_US.UTF-8
keyboard us
timezone America/Chicago --isUtc
rootpw --plaintext vagrant
reboot

# Network setup
network --bootproto=dhcp --device=link --activate
firewall --enabled --ssh
services --enabled=sshd

# System authorization information
auth --enableshadow --passalgo=sha512

# SELinux and security
selinux --enforcing
firstboot --disable

# Installation source
url --url=http://192.168.121.21/rhel/9

# System bootloader configuration
bootloader --location=mbr --boot-drive=sda
zerombr
clearpart --all --initlabel
autopart --type=lvm

# User creation
user --name=vagrant --password=vagrant --groups=wheel --plaintext

# Packages
%packages
@core
@standard
chrony
vim
git
python3
ansible-core
%end

# Post-install script
%post
echo "Completed RHEL 9 minimal setup" > /root/post_install.log
%end
