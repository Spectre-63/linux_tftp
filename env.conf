#!/bin/bash
# =============================================================================
# env.conf â€” shared environment configuration
# =============================================================================

# Base repo path
REPO_BASE="$HOME/src/projects/home/linux_tftp"

# Exclusion file (repo-relative)
EXCLUDE_FILE="$REPO_BASE/.rsync-exclude"

# Common rsync options
RSYNC_OPTS="-avh --exclude-from=$EXCLUDE_FILE"

# ISO storage
ISO_DIR="/srv/iso"

# -----------------------------------------------------------------------------
# Distro version definitions (expandable)
# -----------------------------------------------------------------------------
# Define supported distributions and versions as associative array
# Key = distro name, Value = space-separated version list
declare -A DISTRO_VERSIONS=(
  [rhel]="9 10"
  [rocky]="10"
)

# -----------------------------------------------------------------------------
# System paths
# -----------------------------------------------------------------------------
WWW_BASE="/var/www"
TFTP_BASE="/var/lib/tftpboot"

# -----------------------------------------------------------------------------
# Kea, Apache, TFTP sources
# -----------------------------------------------------------------------------
declare -A MAP_PULL=(
  ["/var/www"]="$REPO_BASE/html"
  ["/var/lib/tftpboot"]="$REPO_BASE/tftpboot"
  ["/etc/kea"]="$REPO_BASE/kea"
  ["/etc/systemd/system"]="$REPO_BASE/system"
)

# -----------------------------------------------------------------------------
# Derived path bindings
# -----------------------------------------------------------------------------
KEA_SYS_DIR="/etc/kea"
KEA_REPO_DIR="${MAP_PULL[$KEA_SYS_DIR]}"

WWW_SYS_DIR="/var/www"
WWW_REPO_DIR="${MAP_PULL[$WWW_SYS_DIR]}"

TFTP_SYS_DIR="/var/lib/tftpboot"
TFTP_REPO_DIR="${MAP_PULL[$TFTP_SYS_DIR]}"

SYSTEMD_SYS_DIR="/etc/systemd/system"
SYSTEMD_REPO_DIR="${MAP_PULL[$SYSTEMD_SYS_DIR]}"

# -----------------------------------------------------------------------------
# Sanity guard: ensure base paths do not have trailing slashes
# -----------------------------------------------------------------------------
WWW_BASE="${WWW_BASE%/}"
TFTP_BASE="${TFTP_BASE%/}"
ISO_DIR="${ISO_DIR%/}"

